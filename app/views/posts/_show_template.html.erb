<% if show_all %>
  <% feed_posts = user.get_user_posts_feed %>
<% else %>
  <% feed_posts = user.posts %>
<% end %>

<h2> Posts List </h2>
<h2> <%= feed_posts.count %> posts </h2>

<ul class="posts-container">

  <div class="posts-list">
   <% feed_posts.reverse.each do |post| %>

     <li class="post_container">
       <div class="post">
         <div class="post_avatar">
           <a class="post_avatar_link" href="<%= user_url(post.user) %>">
             <div class="post_avatar">
               <% if post.user.has_profile_picture %>
                 <img src="<%= post.user.profile_picture.url(:small) %>">
               <% else %>
                 <img src="<%=asset_path "blank_profile.png"%>">
               <% end %>
             </div>
           </a>
         </div>
         <div class="post_wrapper">
           <div class="post_header">
             <%= link_to post.user.username, user_url(post.user) %>
             <% unless current_user == post.user %>
                 <%= render "users/follow_button", follower: post.user %>
             <% end %>
           </div>
           <div class="post_content">
             <%= render "posts/post_content_template", post: post %>
           </div>
           <div class="post_footer">
             <ul>
                <ul>
                  <%= render "posts/likes_template", post: post %>
                </ul>
                <ul>
                  <li>
                    <%= post.comments.count %> comments
                  </li>

                    <li>
                      Post Comment
                      <%= render "comments/new_template", post: post %>
                    </li>

                  <div>
                    <ul>
                      <%= render "comments/comments_template", post: post %>
                    </ul>
                  </div>
                </ul>
             </ul>
           </div>
         </div>
       </div>
     </li>
   <% end %>
 </div>
</ul>